---
title: BOJ 2055 - 삼각형 찾기
date: 2024-06-15 22:47:00 +0900
categories: [PS]
tags: []     # TAG names should always be lowercase
toc: false
comments: true
math: true
---


| 시간 제한 | 메모리 제한 |
|:---------|:----------|
| 2 초     | 128 MB    |    

[문제 풀러가기](https://www.acmicpc.net/problem/2055)

## 문제
<hr>

삼각형이란 세 개의 변으로 이루어진 면적이 양수인 도형이다. 격자 삼각형이란 삼각형의 세 꼭짓점의 좌표가 정수로 표현되는 삼각형을 말한다. 격자의 범위가 N×M으로 주어질 때, 가능한 삼각형의 개수를 구하는 프로그램을 작성하시오. 예를 들어 N=1, M=2일 경우에는 다음과 같은 18개의 경우가 있다.

![예제](https://www.acmicpc.net/JudgeOnline/upload/201007/33333.png)

## 입력
<hr>
첫째 줄에 두 정수 N, M이 주어진다.

## 출력
<hr>
첫째 줄에 답을 출력한다.

## 제한
<hr>
* 1 ≤ N, M ≤ 1,000

<br>
<details>
    <summary><b>예제 입력/출력</b></summary>
    <table style="font-family: 'Monoplex KR Wide Nerd', monospace">
    <th style="text-align: center">입력</th><th style="text-align: center">출력</th>
    <tr><td>1 2</td><td>18</td></tr>
    </table>
</details>

<br><br>

## 풀게 된 계기
<hr>
1. solved.ac에 삼각형을 검색한다.
2. 뭔가 맛있어 보이는 이름이다.
3. 뭔가 풀 수 있을 거 같은데 학원에서 수업은 듣기 싫으니까 풀어본다.
4. 와 풀었어요..!!

## 풀이 과정
<hr>
중학교나 고등학교에서 이런 문제는 한 번쯤 보신 적이 있을 겁니다.
<div><img src="/assets/img/2055/problem.png" alt=""></div>

이 문제를 푸는 방법은 다음과 같습니다.

1. 전체 격자점 중 세 점을 고르는 경우의 수를 구한다.
2. 세 점이 삼각형을 이루지 않는 경우를 전체 경우에서 뺀다.

여기서 세 점이 삼각형을 이루지 않는 경우는 세 점이 모두 일직선상에 있는 경우입니다.

이 경우에는 문제에서 가로와 세로 길이가 각각 4와 6으로 정해져 있었지만, 실제로 문제에서 요구하는 것은 임의의 가로와 세로 길이에 대한 해답입니다. 이것을 어떻게 구할 수 있을까요?

일단 문제에서는 점이 아니라 격자의 범위를 주었으므로, $N + 1$과 $M + 1$으로 점의 개수를 구할 수 있습니다. 또한, $N$과 $M$이 바뀌어도 답은 같기에 $N + 1$과 $M + 1$ 중에 작지 않은 값을 $X$, 다른 값을 $Y$라고 하겠습니다. 편의상 $X$를 가로 길이, $Y$를 세로 길이라고 하겠습니다.

일단 세 점이 모두 가로 또는 세로선에 평행한 경우는 쉽게 구할 수 있습니다. 각각 $X \cdot {}_YC_3 $, $Y \cdot {}_XC_3 $이 됩니다.

이제 다른 경우를 구해봅시다. 먼저 세 점을 각각 $P_1(a_1, b_1), P_2(a_2, b_2), P_3(a_3, b_3)$이라고 하겠습니다. 

이때 이 세 점은 한 직선 위에 있습니다. 따라서 기울기가 같으며, 그 기울기를 $m$이라고 하면

$$\frac{b_2-b_1}{a_2-a_1} = \frac{b_3-b_2}{a_3-a_2} = \frac{b_3-b_1}{a_3-a_1} = m$$

이 성립합니다.

또한 세 점을 좌우 반전한 $P'_1(X - a_2, b_1), P'_2(X - a_2, b_2), P'_3(X - a_3, b_3$ 역시 하나의 직선 위에 있는 점이라는 것입니다. 그림으로 나타내면 다음과 같습니다.

![예시1](/assets/img/2055/problem2.png)

세 점이 같은 세로선에 있는 경우는 위에서 이미 세었기 때문에, 각각의 점들의 조합에 대해 모든 점들의 조합은 좌우반전한 점들의 조합을 가집니다. 따라서, 둘 중에 기울기가 양수인 경우만 생각하고 구한 다음 2를 곱해주면 모든 일직선상의 점들의 조합을 구할 수 있습니다.

이제 이 세 점을 어떤 기준을 세워서 찾아야 할 것인데, 언제나 그렇듯 이때 중복이 발생하지 않도록 세는 것이 중요합니다. 

